extends ../layout.pug 

block content

  main.page-content
  section.ticket-form
    .ticket-form__wrapper
      h1.ticket-form__title Новая публикация
      .ticket-form__tile
        form.ticket-form__form.form(action='/offers/add', method='post', enctype='multipart/form-data', autocomplete='off')
          .ticket-form__avatar-container.js-preview-container
            .ticket-form__avatar.js-preview
              if picture
                img(src=`/img/${picture}`, srcset=`/img/${picture.replace(/\..*/, ``)}@2x.jpg 2x`, alt='')
            .ticket-form__field-avatar
              input#avatar.visually-hidden.js-file-field(type='file', name='avatar')
              label(for='avatar')
                span.ticket-form__text-upload Загрузить фото…
                span.ticket-form__text-another Загрузить другое фото…
          .ticket-form__content
            .ticket-form__row
              .form__field
                input#ticket-name.js-field(type='text', name='ticket-name', required='', value=`${fields && fields.hasOwnProperty(`ticket-name`) ? fields[`ticket-name`] : ``}`)
                label(for='ticket-name') Название
                span Обязательное поле
            .ticket-form__row
              .form__field
                textarea#comment-field.js-field(name='comment', cols='30', rows='10', maxlength='400', minlength='50')
                  | #{fields && fields.hasOwnProperty(`comment`) ? fields.comment : ``}
                label(for='comment-field') Описание
                span Обязательное поле
            .ticket-form__row
              select#category-field.form__select.js-multiple-select(name='category', data-label='Выбрать категорию публикации')
                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Книги`) 
                  option(value='Книги', selected='') Книги
                else 
                  option(value='Книги') Книги

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Разное`) 
                  option(value='Разное', selected='') Разное
                else 
                  option(value='Разное') Разное

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Посуда`) 
                  option(value='Посуда', selected='') Посуда
                else 
                  option(value='Посуда') Посуда

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Игры`) 
                  option(value='Игры', selected='') Игры
                else 
                  option(value='Игры') Игры

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Животные`) 
                  option(value='Животные', selected='') Животные
                else 
                  option(value='Животные') Животные

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Журналы`) 
                  option(value='Журналы', selected='') Журналы
                else 
                  option(value='Журналы') Журналы

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Цветы`) 
                  option(value='Цветы', selected='') Цветы
                else 
                  option(value='Цветы') Цветы

                if fields && fields.hasOwnProperty(`category`) && fields.category.includes(`Марки`) 
                  option(value='Марки', selected='') Марки
                else 
                  option(value='Марки') Марки
            .ticket-form__row
              .form__field.form__field--price
                input#price-field.js-field.js-price(type='number', name='price', min='1', required='', value=`${fields && fields.hasOwnProperty(`price`) ? fields.price : ``}`)
                label(for='price-field') Цена
                span Обязательное поле
              .form__switch.switch
                .switch__item
                  if fields && fields.hasOwnProperty(`action`) && fields.action === `buy`
                    input#buy-field.visually-hidden(type='radio', name='action', value='buy', checked)
                  else 
                    input#buy-field.visually-hidden(type='radio', name='action', value='buy')
                  label.switch__button(for='buy-field') Куплю
                .switch__item
                  if fields && fields.hasOwnProperty(`action`) && fields.action === `sell`
                    input#sell-field.visually-hidden(type='radio', name='action', value='sell', checked)
                  else
                    input#sell-field.visually-hidden(type='radio', name='action', value='sell')
                  label.switch__button(for='sell-field') Продам
          button.form__button.btn.btn--medium.js-button(type='submit', disabled='') Опубликовать
